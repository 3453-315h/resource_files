   <ruby>
      help = %Q|
        Description:
          This Metasploit RC file can be used to automate the exploitation process.
          In this example we are using msfconsole setg to add to msfdb database rhost(s)
          then trigger db_nmap nse scripts and msfconsole auxiliary modules againts rhost(s).

        Execute in msfconsole:
          setg RHOSTS <hosts-separated-by-spaces>
          resource <path-to-script>/snmp_enum.rc

        Author:
          r00t-3xp10it  <pedroubuntu10[at]gmail.com>
      |
      print_line(help)
      Rex::sleep(1.5)

      print_status("Please wait, checking if RHOSTS are set globally.")
      if (framework.datastore['RHOSTS'] == nil or framework.datastore['RHOSTS'] == '')
         print_error("Please set RHOSTS: setg RHOSTS xxx.xxx.xxx.xxx xxx.xxx.xxx.xxx")
         return nil
      end

         print_good("RHOSTS set globally [ OK ] running nmap scans.")
         run_single("db_nmap -sU -sS -Pn --script=banner.nse,smb-os-discovery.nse,smb-enum-shares.nse,smb-enum-processes.nse --script-args=unsafe=1 -p U:137,T:139,445 #{framework.datastore['RHOSTS']}")
         run_single("hosts")
         run_single("services")

      print_good("Please wait, running msf auxiliary modules.")
      run_single("use auxiliary/scanner/snmp/snmp_enum")
      run_single("exploit")
      run_single("use auxiliary/scanner/snmp/snmp_enumusers")
      run_single("exploit")
      run_single("use auxiliary/scanner/snmp/snmp_enumshares")
      run_single("exploit")
      print_warning("please wait, Cleaning msfdb Database.")
      run_single("unsetg RHOSTS")
      run_single("services -d")
      run_single("hosts -d")
   </ruby>
